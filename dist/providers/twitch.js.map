{"version":3,"file":"twitch.js","sources":["../../src/providers/twitch.ts"],"sourcesContent":["import { OAuth2Provider } from \"./oauth2\";\nconst defaultConfig = {\n    id: \"twitch\",\n    scope: \"user:read:email\",\n    accessTokenUrl: \"https://id.twitch.tv/oauth2/token\",\n    authorizationUrl: \"https://id.twitch.tv/oauth2/authorize\",\n    profileUrl: \"https://api.twitch.tv/helix/users\",\n};\nexport class TwitchOAuth2Provider extends OAuth2Provider {\n    constructor(config) {\n        super({\n            ...defaultConfig,\n            ...config,\n        });\n    }\n    async getUserProfile(tokens) {\n        const headers = {\n            \"Client-ID\": this.config.clientId + \"\",\n            Accept: \"application/vnd.twitchtv.v5+json\",\n            Authorization: `Bearer ${tokens.access_token}`,\n        };\n        const { data: [profile], } = await fetch(this.config.profileUrl, { headers: headers }).then((res) => res.json());\n        return profile;\n    }\n}\n"],"names":["OAuth2Provider"],"mappings":";;;;;;;;;;AACA,MAAM,gBAAgB;AAAA,EAClB,IAAI;AAAA,EACJ,OAAO;AAAA,EACP,gBAAgB;AAAA,EAChB,kBAAkB;AAAA,EAClB,YAAY;AAAA;mCAE0BA,gCAAe;AAAA,EACrD,YAAY,QAAQ;AAChB,UAAM;AAAA,SACC;AAAA,SACA;AAAA;AAAA;AAAA,QAGL,eAAe,QAAQ;AACzB,UAAM,UAAU;AAAA,MACZ,aAAa,KAAK,OAAO,WAAW;AAAA,MACpC,QAAQ;AAAA,MACR,eAAe,UAAU,OAAO;AAAA;AAEpC,UAAM,EAAE,MAAM,CAAC,aAAc,MAAM,MAAM,KAAK,OAAO,YAAY,EAAE,WAAoB,KAAK,CAAC,QAAQ,IAAI;AACzG,WAAO;AAAA;AAAA;;;;"}